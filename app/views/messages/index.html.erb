<h1>List of all messages</h1>
<table style="padding: 5px;border: 1px #999999 solid; color: #606060; text-align: center;">
  <tr>
    <td>Message</td>
    <td>Author</td>
    <td>Comments</td>
    <td>Action</td>
  </tr>
  <% @messages.each do |message| %>
    <tr>
      <td> <%= message.content %> </td>
      <td>
      <% if message.user.first_name.blank? && message.user.last_name.blank? %>
        <%= message.user.email %> 
      <% else %>
        <%= message.user.first_name %> <%= message.user.last_name %> 
      <% end %>
      </td>
      <td> <%= link_to message.comments.count, comments_path({message_id: message.id}) %> </td>
      <td> <%= link_to 'Show', message %> |
      <% if message.user.id == current_user.id %>
        <%= link_to 'Delete', message, method: :delete %> |
      <% end %>
      <%= link_to 'Comment', new_comment_path({message_id: message.id}) %> </td>
       
    </tr>
  <% end %>
</table>
<%= link_to 'New message', new_message_path %>